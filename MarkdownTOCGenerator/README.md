1. [Задача](#задача)
2. [Решение](#решение)
    1. [Компиляция и запуск](#компиляция-и-запуск)
        1. [Gradle](#gradle)
    2. [Формальности и примеры](#формальности-и-примеры)

```
1. [Задача](#задача)  
2. [Решение](#решение)  
	1. [Компиляция и запуск](#компиляция-и-запуск)  
		1. [Gradle](#gradle)  
	2. [Формальности и примеры](#формальности-и-примеры)  

```

Тестовое задание для летней стажировки `JetBrains 2021`

## Задача
Вам нужно написать генератор оглавления для markdown файлов.

Это должна быть command-line тула на `Java`, которая принимает на вход путь к markdown файлу, добавляет к нему в начало оглавление и выводит результат в standard output.

Нельзя пользоваться библиотеками для генерации и парсинга markdown.

Input:

    # My Project
    ## Idea
    content
    ## Implementation
    ### Step 1
    content
    ### Step 2
    content

Output:

    1. [My Project](#my-project)
        1. [Idea](#idea)
        2. [Implementation](#implementation)
            1. [Step 1](#step-1)
            2. [Step 2](#step-2)
    
    # My Project
    ## Idea
    content
    ## Implementation
    ### Step 1
    content
    ### Step 2
    content

## Решение

### Компиляция и запуск

#### Gradle
```
git clone https://github.com/Dalvikk/MarkdownTOCGenerator
cd MarkdownTOCGenerator
./gradlew.bat run --args="Path to file"
```
(просто /gradlew, если у вас *nix) или
```
./gradlew.bat build
java -jar ./MarkdownTOCGenerator.jar
```

### Формальности и примеры

В качестве примера посмотрите [example.md](./example.md) с самыми различными тестами для заголовка

Все тестируется на `GitHub Markdown`.  
Немножко формальностей:

1. Строка считается заголовком, если:
    * Не содержится в блоке кода
    * Начинается с `#`, которые определяют уровень заголовка
    * Уровень заголовка не может быть больше 6
    * Допускается `< 4` пробелов, перед `#`
    * После решеток стоит пробел. Все что после — сам заголовок.
    * Все что находится после `min(6, count(#))` - название заголовка
    
2. Гиперссылка создается в виде `[Название ссылки](самма ссылка)`. Ссылка создается по следующим правилам:
    * Все символы приводятся к нижнему регистру 
    * Все символы которые не являются буквами или цифрами (в том числе пробельные) заменяются на `-`
    * Два и более вхождения `-` заменяются на одно, обрезаются лидирующие и конечные `-`  
    * В начале ссылки добавляется `#`

3. Программа старается:
   1. Отображать заголовки так, чтобы сохранялась древо-видная приятная глазу структура
   2. Использовать по минимуму `Tab`'ов
   
   Если более мелкий уровень по желанию автора идет раньше, то это будет выглядеть не так:
   ```
                           1. [Шестой уровень](#шестой-уровень)
   1. [Первый уровень заголовка](#первый-уровень-заголовка)
            1. [Четвертый](#четвертый)            
       1. [Второй](#второй)
   ```
   
   (6 (!) лишних `Tab`'ов), а следующим образом:
   
   ```
   1. [Шестой уровень](#шестой-уровень)  
   2. [Первый уровень заголовка](#первый-уровень-заголовка)  
      1. [Четвертый](#четвертый)
      2. [Второй](#второй)
   ```
